% -*- ConText -*-
% It specifies the format of head named 'title'
% Specifically the style of the font: sans serif
% + bold + big font.

\startenvironment env_esercizi
  \usepath[./]
\mainlanguage[italian]
\setuppapersize[A4]
\setuplayout[
  topspace=1cm,
  backspace=2cm,
  width=middle,
  height=middle,
  header=0pt]

\setupbodyfont[10pt]

%\setupthinrules[before={}]
\def\compito[#1]
 {\getrawparameters[Compito]
 [title=,#1]}

\def\makecompitotitle{%
\page%
\doif{\Compitoscuola}{alberghiero}{%
\setuplayout[header=1.5cm]
\setupheadertexts[{\framed[frame=off,width=broad]{\externalfigure[img/loghi/alberghiero2.png][height=1.5cm]\hfill\externalfigure[img/loghi/alberghiero1.png][height=1.5cm]\hfill \externalfigure[img/loghi/alberghiero3.png][height=1.5cm]}}]}

\startalignment[center]
  \blank[force,1*small]
      {\tfc \Compitotitle}
  \blank[1*small]
\stopalignment
\setuppagenumber[number=1]
\resetesercizio
\resetsoluzione
}

\setuphead[title][style={\ss\bfd},alternative=middle]

\def\mypagenumber#1%
  {Pagina #1 di \lastpagenumber} % \totalnumberofpages

\setuppagenumbering[location=footer, command=\mypagenumber]

\def\rfoot{}
\setupfootertexts[][\rfoot]

\setuphead[section][style={\ss\bfb}]
\setuphead[subsection][style={\ss\bfa}]

\setupquotation[style=italic]

%%%%%%%%%%%%%%%%%%%%
%% esercizio soluzione
\definemode[soluzioni][keep]
\definemode[esercizio][keep]
\defineenumeration[esercizio][text={},stopper={.},alternative=left,width=2ex]% stopper or right coupling=soluzione
\defineenumeration[soluzione][text={Soluzione},stopper={.},alternative=left]% stopper or right ,coupling=esercizio
\defineblock[soluzione]
%\keepblocks[soluzione]
\hideblocks[soluzione]
\def\printsoluzioni{\page \subject{Soluzioni} \useblocks[soluzione]}
%%%%%%%%%%%%%%%%%%%%
%% some env
\definestartstop[parts][before={\blank[small]\startitemize[i,joinedup][stopper=.]},
                        after={\stopitemize}]  
\definestartstop[verofalso][before={\startitemize[a,packed][stopper=\thinspace)]
\let\olditem\item\define\item{\olditem \framed[width=1em,strut=yes]{V}\thinspace\framed[width=1em,strut=yes]{F}\thinspace}},
                        after={\stopitemize}]

\definestartstop[truefalse][before={\startitemize[a,packed][stopper=\thinspace)]
\let\olditem\item\define\item{\olditem \framed[width=1em,strut=yes]{V}\thinspace\framed[width=1em,strut=yes]{F}\thinspace}},
                        after={\stopitemize}]

\definestartstop[choices][before={\blank[small]\startitemize[A,packed,joinedup]},after={\stopitemize}]

\stopenvironment
